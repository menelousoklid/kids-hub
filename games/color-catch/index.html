<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#111111" />
  <title>Renk Yakala</title>
  <style>
    :root{--bg:#0f1220;--text:#f2f5ff;--muted:#aab3d6;--shadow:0 10px 30px rgba(0,0,0,.35);--radius:18px;}
    *{box-sizing:border-box;}
    html,body{height:100%;}
    body{
      margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background: radial-gradient(1200px 900px at 20% 10%, #1a1f43 0%, var(--bg) 55%, #0b0d18 100%);
      color:var(--text);overflow:hidden;-webkit-tap-highlight-color:transparent;touch-action:manipulation;
    }
    .app{height:100%;display:flex;flex-direction:column;padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);}
    header{padding:14px;display:flex;align-items:center;justify-content:space-between;gap:10px;}
    .title{display:flex;align-items:center;gap:10px;min-width:0;}
    .logo{width:42px;height:42px;border-radius:14px;background:linear-gradient(135deg,#ffcc66,#ff6bd6 45%,#6b8bff);box-shadow:var(--shadow);display:grid;place-items:center;font-size:22px;}
    h1{margin:0;font-size:16px;}
    .sub{margin:2px 0 0;color:var(--muted);font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
    .actions{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:flex-end;}
    .pill{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.12);border-radius:999px;padding:10px 12px;font-weight:900;font-size:13px;box-shadow:0 10px 20px rgba(0,0,0,.15);display:flex;gap:8px;align-items:center;}
    .btn{appearance:none;border:0;cursor:pointer;border-radius:999px;padding:10px 14px;font-weight:900;font-size:13px;color:var(--text);
      background:linear-gradient(135deg,#6b8bff,#42e2ff);box-shadow:var(--shadow);user-select:none;}
    .btn.secondary{background:rgba(255,255,255,.10);border:1px solid rgba(255,255,255,.16);}
    .btn:active{transform:translateY(1px) scale(.99);}
    main{flex:1;min-height:0;padding:0 14px 14px;display:flex;}
    .panel{
      width:100%;max-width:980px;margin:0 auto;
      background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.10);
      border-radius:var(--radius);box-shadow:var(--shadow);
      padding:12px;display:flex;flex-direction:column;gap:12px;min-height:0;
    }
    .target{
      flex:1;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.18);
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      overflow:hidden;
      min-height:240px;
    }
    .bubble{
      width:120px;height:120px;border-radius:999px;
      display:grid;place-items:center;
      box-shadow:0 14px 26px rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.14);
      transform: scale(1);
      transition: transform .12s ease;
      font-weight:1000;
      font-size:18px;
      user-select:none;
    }
    .bubble.pulse{ transform: scale(1.04); }

    .buttons{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap:12px;
    }
    .colorBtn{
      border-radius:18px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.08);
      padding:16px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      cursor:pointer;
      user-select:none;
      font-weight:1000;
      font-size:16px;
      box-shadow:0 12px 24px rgba(0,0,0,.22);
    }
    .dot{
      width:22px;height:22px;border-radius:999px;
      border:2px solid rgba(255,255,255,.3);
      box-shadow:0 10px 18px rgba(0,0,0,.2);
      flex:0 0 auto;
    }
    .toast{
      position:fixed;left:50%;bottom:calc(18px + env(safe-area-inset-bottom));
      transform:translateX(-50%);background:rgba(0,0,0,.6);border:1px solid rgba(255,255,255,.18);
      padding:10px 14px;border-radius:999px;font-weight:900;font-size:13px;box-shadow:var(--shadow);
      opacity:0;pointer-events:none;transition:opacity .25s ease, transform .25s ease;max-width:calc(100% - 24px);text-align:center;
    }
    .toast.show{opacity:1;transform:translateX(-50%) translateY(-6px);}
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;padding:18px;}
    .overlay.show{display:flex;}
    .modal{width:min(520px,100%);border-radius:22px;background:rgba(23,26,43,.95);border:1px solid rgba(255,255,255,.14);box-shadow:var(--shadow);padding:16px;}
    .modal h2{margin:6px 0 6px;font-size:18px;}
    .modal p{margin:0 0 12px;color:var(--muted);}
    .modal .row{display:flex;gap:10px;justify-content:flex-end;flex-wrap:wrap;}
    @media (min-width: 700px){
      .buttons{grid-template-columns: repeat(4, minmax(0,1fr));}
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="title">
        <div class="logo">üé®</div>
        <div style="min-width:0">
          <h1>Renk Yakala</h1>
          <div class="sub">Ortadaki renkle aynƒ± butona bas</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn secondary" id="btnBack" type="button">‚¨ÖÔ∏è Men√º</button>
        <div class="pill">üî• Seri: <span id="streak">0</span></div>
        <div class="pill">‚≠ê Puan: <span id="score">0</span></div>
        <button class="btn" id="btnStart" type="button">‚ñ∂ Ba≈üla</button>
      </div>
    </header>

    <main>
      <section class="panel" aria-label="Renk yakalama">
        <div class="target">
          <div class="bubble" id="bubble">Hazƒ±r mƒ±sƒ±n?</div>
        </div>

        <div class="buttons" id="buttons"></div>
      </section>
    </main>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <div class="overlay" id="overlay" role="dialog" aria-modal="true">
    <div class="modal">
      <h2>üéâ Bitti!</h2>
      <p id="endText">Skor</p>
      <div class="row">
        <button class="btn secondary" id="btnClose" type="button">Kapat</button>
        <button class="btn" id="btnAgain" type="button">Tekrar</button>
      </div>
    </div>
  </div>

  <script>
    const btnBack = document.getElementById('btnBack');
    btnBack.addEventListener('click', () => window.location.href = "../../index.html");

    const bubble = document.getElementById('bubble');
    const buttonsEl = document.getElementById('buttons');
    const toastEl = document.getElementById('toast');
    const overlay = document.getElementById('overlay');
    const endText = document.getElementById('endText');

    const btnStart = document.getElementById('btnStart');
    const btnAgain = document.getElementById('btnAgain');
    const btnClose = document.getElementById('btnClose');

    const scoreEl = document.getElementById('score');
    const streakEl = document.getElementById('streak');

    const COLORS = [
      { key:"Kƒ±rmƒ±zƒ±", hex:"#ff4757", emoji:"üü•" },
      { key:"Sarƒ±",    hex:"#ffd32a", emoji:"üü®" },
      { key:"Ye≈üil",   hex:"#2ed573", emoji:"üü©" },
      { key:"Mavi",    hex:"#1e90ff", emoji:"üü¶" }
    ];

    let running = false;
    let timeLeft = 30;
    let tick = null;
    let score = 0;
    let streak = 0;
    let current = null;

    function showToast(msg){
      toastEl.textContent = msg;
      toastEl.classList.add('show');
      clearTimeout(showToast._t);
      showToast._t = setTimeout(()=>toastEl.classList.remove('show'), 1000);
    }

    function setBubble(color){
      bubble.classList.remove('pulse');
      bubble.style.background = color.hex;
      bubble.style.color = "#0b0d18";
      bubble.textContent = `${color.emoji} ${color.key}`;
      requestAnimationFrame(()=>bubble.classList.add('pulse'));
      setTimeout(()=>bubble.classList.remove('pulse'), 160);
    }

    function pickNew(){
      current = COLORS[Math.floor(Math.random()*COLORS.length)];
      setBubble(current);
    }

    function stop(){
      running = false;
      btnStart.textContent = "‚ñ∂ Ba≈üla";
      clearInterval(tick); tick = null;
      endText.textContent = `Skorun: ${score} ‚≠ê (Seri: ${streak})`;
      overlay.classList.add('show');
    }

    function start(){
      overlay.classList.remove('show');
      running = true;
      timeLeft = 30;
      score = 0;
      streak = 0;
      scoreEl.textContent = "0";
      streakEl.textContent = "0";
      btnStart.textContent = "‚èπ Bitir";
      showToast("Ba≈üla! üé®");
      pickNew();

      if(tick) clearInterval(tick);
      tick = setInterval(()=>{
        if(!running) return;
        timeLeft--;
        // zaman g√∂stermek istersen header'a pill ekleyebilirsin
        if(timeLeft <= 0) stop();
      }, 1000);
    }

    function press(color){
      if(!running) return;
      if(color.key === current.key){
        streak++;
        score += 10 + Math.min(20, streak); // seri bonus
        showToast("‚úÖ Doƒüru!");
      } else {
        showToast("‚ùå Yanlƒ±≈ü!");
        streak = 0;
        score = Math.max(0, score - 5);
      }
      scoreEl.textContent = String(score);
      streakEl.textContent = String(streak);
      pickNew();
    }

    function renderButtons(){
      buttonsEl.innerHTML = "";
      for(const c of COLORS){
        const b = document.createElement('button');
        b.type = "button";
        b.className = "colorBtn";
        b.innerHTML = `<span>${c.key}</span><span class="dot" style="background:${c.hex}"></span>`;
        b.addEventListener('click', ()=>press(c), {passive:true});
        buttonsEl.appendChild(b);
      }
    }

    btnStart.addEventListener('click', ()=>{
      if(!running) start();
      else stop();
    });
    btnAgain.addEventListener('click', start);
    btnClose.addEventListener('click', ()=>overlay.classList.remove('show'));

    renderButtons();
    bubble.style.background = "rgba(255,255,255,.10)";
    bubble.style.color = "#f2f5ff";
  </script>
</body>
</html>
